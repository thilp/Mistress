<html><head><title>Mistress::Env::Config</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >

<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
BODY {
  background: white;
  color: black;
  font-family: arial,sans-serif;
  margin: 0;
  padding: 1ex;
}

A:link, A:visited {
  background: transparent;
  color: #006699;
}

A[href="#POD_ERRORS"] {
  background: transparent;
  color: #FF0000;
}

DIV {
  border-width: 0;
}

DT {
  margin-top: 1em;
  margin-left: 1em;
}

.pod { margin-right: 20ex; }

.pod PRE     {
  background: #eeeeee;
  border: 1px solid #888888;
  color: black;
  padding: 1em;
  white-space: pre;
}

.pod H1      {
  background: transparent;
  color: #006699;
  font-size: large;
}

.pod H1 A { text-decoration: none; }
.pod H2 A { text-decoration: none; }
.pod H3 A { text-decoration: none; }
.pod H4 A { text-decoration: none; }

.pod H2      {
  background: transparent;
  color: #006699;
  font-size: medium;
}

.pod H3      {
  background: transparent;
  color: #006699;
  font-size: medium;
  font-style: italic;
}

.pod H4      {
  background: transparent;
  color: #006699;
  font-size: medium;
  font-weight: normal;
}

.pod IMG     {
  vertical-align: top;
}

.pod .toc A  {
  text-decoration: none;
}

.pod .toc LI {
  line-height: 1.2em;
  list-style-type: none;
}

  /*]]>*/-->
</style>


</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.018002 at Tue Apr 22 02:10:47 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#ATTRIBUTES'>ATTRIBUTES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#location'>location</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#component_name()'>component_name()</a>
    <li class='indexItem indexItem2'><a href='#get(_%24spec_)'>get( $spec )</a>
    <li class='indexItem indexItem2'><a href='#_build_config()'>_build_config()</a>
    <li class='indexItem indexItem2'><a href='#load(_..._)'>load( ... )</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Mistress::Env::Config - Allows other Mistress components to access the configuration.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 0.001</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    Mistress-&#62;config-&#62;load(&#39;config.yml&#39;);    # with a filename
    # or:
    Mistress-&#62;config-&#62;load(
        GET &#39;http://config.example.com/&#39;     # with a HTTP::Request::Common
    );
    # etc.

    # later, somewhere else:
    my $opt = Mistress-&#62;config-&#62;get(&#39;my/specification/string&#39;);
    # or maybe:
    my $opt = Mistress-&#62;config-&#62;get(&#39;my specification string&#39;);
    # or (why not?):
    my $opt = Mistress-&#62;config-&#62;get(&#60;&#60;&#39;4AM_STYLE&#39;);
        &#34;please&#34; &#34;gimme&#34; v
        v  &#34;ym&#34;          &#60;&#62; &#34;string&#34; v
        &#62; &#34;specification&#34; ^          @
    4AM_STYLE</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This role defines how to access configuration values in <a href="http://search.cpan.org/perldoc?Mistress" class="podlinkpod"
>Mistress</a>. It is consumed by <a href="http://search.cpan.org/perldoc?Mistress%3A%3AEnv%3A%3AConfig%3A%3AFile" class="podlinkpod"
>Mistress::Env::Config::File</a> (MECF) which implements a fully usable <i>config</i> environment. You may want to replace MECF with something else, for instance if you&#39;re in one of the following cases:</p>

<ul>
<li>You want to use another specification string with <code>get</code> (say <code>&#34;a:b:c&#34;</code>, when MECF uses <code>&#34;a/b/c&#34;</code>). <b>Warning:</b> if you really want to do that, make your <code>get</code> understand <b>both</b> syntaxes, as Mistress core classes use the MECF specification!</li>

<li>You want <code>get</code> to <code>die</code> on specifications that lead to unknown keys.</li>

<li>You want an alias on <code>get</code>.</li>

<li>You want to be able to change configuration values <i>in your code</i>: you can make <code>get</code> stop using <a href="http://search.cpan.org/perldoc?Clone" class="podlinkpod"
>Clone</a> to return copies of the underlying hashref (but be aware of <a href="http://search.cpan.org/perldoc?Mistress%3A%3AEnv%3A%3AConfig%3A%3AHash" class="podlinkpod"
>Mistress::Env::Config::Hash</a>).</li>

<li>Your configuration data come from something else than a file on your filesystem.</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ATTRIBUTES"
>ATTRIBUTES</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="location"
>location</a></h2>

<p>Stores the configuration file&#39;s path, or the configuration service&#39;s URL, or whatever is able to provide configuration data through <code>load</code>. If you want to change this value, consider using <code>load</code> to perform conversions and additional checks.</p>

<p>Consuming classes <b>should override</b> this attribute to enforce type checking: here <code>location</code> accepts any defined value.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="component_name()"
>component_name()</a></h2>

<p>Because Mistress::Env::Config consumes <a href="http://search.cpan.org/perldoc?Mistress%3A%3AEnv" class="podlinkpod"
>Mistress::Env</a>. Returns <code>&#34;config&#34;</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get(_$spec_)"
>get( $spec )</a></h2>

<p><b>Required.</b> Interprets the string <code>$spec</code> (in whatever way the consuming class chooses) to return the configuration value <code>$spec</code> represents.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_build_config()"
>_build_config()</a></h2>

<p><code>Required.</code> This method is the underlying hashref&#39;s builder and is also triggered by <code>load</code> on effective <code>location</code> change. It expects no arguments and returns an hashref.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="load(_..._)"
>load( ... )</a></h2>

<p><b>Required.</b> Consuming classes must implement a <code>load</code> method to safely update <code>location</code>.</p>

<p>This role ensure that the underlying configuration hash is rebuild and the Mistress component interface refreshed.</p>

<p>The return value of your <code>load</code> implementation will be ignored, because this role defines a wrapper around it that returns <code>1</code> if the Mistress configuration was actually updated, and <code>0</code> otherwise (for instance if no <code>components</code> section was found in the configuration source). Thus, <a href="http://search.cpan.org/perldoc?Mistress%3A%3AEnv%3A%3AConfig%3A%3AFile" class="podlinkpod"
>Mistress::Env::Config::File</a>, for instance, simply declares:</p>

<pre>    sub load {
        my ( $self, $file ) = @_;
        $self-&#62;location( Mistress::Util::pcf_r($file) );
    }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Thibaut Le Page &#60;thilp@cpan.org&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2014 by Thibaut Le Page.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>

<!-- end doc -->

</body></html>
